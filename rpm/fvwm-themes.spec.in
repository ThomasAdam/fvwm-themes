#%define prefix %{_prefix}
%define prefix /usr
#%define bindir @bindir@
#%define mandir @mandir@
#%define FT_DATADIR @FT_DATADIR@

%define ver @VERSION@
%define rel 1
%define c_p --disable-run-updatemenu --disable-build-menus --disable-menu-system
%define m_p CFLAGS="-O2"

%define _sourcedir /tmp

Summary:   FVWM Themes, configuration framework for FVWM
Name:      fvwm-themes
Version:   %{ver}
Release:   %{rel}
Copyright: GPL
Group:     X11/Window Managers
Source:    %{name}-%{version}.tar.gz
URL:       http://fvwm-themes.sourceforge.org/
BuildRoot: %{_tmppath}/%{name}-%{version}-root
Packager:  FVWM Themes Developers <fvwm-themes-devel@lists.sourceforge.net>
Autoreq:   1

Requires:  fvwm >= @REQUIRED_FVWM_VERSION@
Requires:  perl >= 5.004
Requires:  m4

Provides:  fvwm-themes

Docdir:    %{prefix}/share/doc

%description
FVWM Themes is a powerful configuration framework for FVWM,
designed to be easily extendible and configurable, includes
several pre-built themes, a pack of images and sounds.

%description -l fr
FVWM Themes est un systХme de configuration puissant pour FVWM.
Il est extansible, facilement configurable et contient des
thХmes, des images et des fichiers sons.

%description -l ru
FVWM Themes является мощным окружением для оконного менеджера FVWM,
спроектированным с учетом легкости расширения и конфигурации.
Пакет включает в себя готовые темы, графические и звуковые файлы.

%prep
%setup

%build
./configure --prefix=%{prefix} %{c_p}
make %{m_p}

%install
rm -rf $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT%{prefix} ROOT_PREFIX=$RPM_BUILD_ROOT install

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-, root, root)

%doc AUTHORS COPYING INSTALL NEWS README TODO
%doc doc/FAQ doc/README.1st doc/colorsets doc/creating-themes
%doc doc/fvwm-themes.lsm
%{prefix}/bin/*
%{prefix}/man/*/*
%{prefix}/share/*/*

%post
[ -x %{prefix}/bin/fvwm-themes-menuapp ] && fvwm-themes-menuapp --site --build-menus --remove-popup || true
## TODO: how to specify the current date in .spec? Or how to run a `command`?
#%changelog
#
#* Thu 07 Sep 2000 20:00:00 IDT  FVWM Themes Developers  <fvwm-themes-devel@lists.sourceforge.net>
#- Auto building %{PACKAGE_VERSION}
#
#* Thu 07 Sep 2000 20:00:00 IDT  Mikhael Goikhman  <migo@homemail.com>
#- First try at making the package
